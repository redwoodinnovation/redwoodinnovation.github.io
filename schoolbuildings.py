import overpass
import geojson

api = overpass.API(timeout=1000)

# api.get already returns a FeatureCollection
res = api.get("""
(
  way[building](poly:"37.8889747 -122.2949514 37.8888376 -122.2956308 37.8894885 -122.295121 37.8903283 -122.2961314 37.8903653 -122.2954079 37.8901303 -122.2953348 37.8900959 -122.2960687 37.8899635 -122.2960219");  
  way[building](poly:"37.897678 -122.29413 37.897691 -122.294478 37.896729 -122.294521 37.896716 -122.294171");
  way[building](poly:"37.898593 -122.294227 37.898972 -122.296115 37.897874 -122.295617 37.897875 -122.295553 37.897828 -122.29378 37.898248 -122.29376 37.89831 -122.293797 37.898391 -122.293797 37.898434 -122.293909 37.898507 -122.294081 37.898543 -122.294142");
  way[building](poly:"37.896646 -122.29154 37.896505 -122.291545 37.895586 -122.291581 37.895587 -122.291604 37.895595 -122.291774 37.895607 -122.291774 37.895614 -122.292142 37.895404 -122.292147 37.895404 -122.292177 37.895323 -122.292182 37.895323 -122.292223 37.894981 -122.292239 37.894979 -122.292604 37.89499 -122.29264 37.895012 -122.292651 37.89662 -122.29258 37.896656 -122.292554 37.896675 -122.292515 37.896679 -122.292492");
  way[building](poly:"37.892113 -122.303137 37.89225 -122.302455 37.893575 -122.302874 37.893538 -122.303077 37.893378 -122.303124 37.893093 -122.30324 37.892891 -122.303398");
  way[building](poly:"37.886348 -122.300565 37.88603 -122.3024 37.886158 -122.302427 37.886483 -122.302493 37.886533 -122.302075 37.886625 -122.302098 37.886727 -122.302104 37.887049 -122.301947 37.887086 -122.301935 37.887366 -122.301949 37.887446 -122.302063 37.887492 -122.300967");
  way[building](poly:"37.888545 -122.288094 37.888569 -122.288046 37.888674 -122.287704 37.888826 -122.287234 37.888827 -122.287202 37.88882 -122.287184 37.888799 -122.287166 37.888712 -122.287193 37.888135 -122.287414 37.887993 -122.287519 37.887801 -122.287666 37.887614 -122.287755 37.887597 -122.287761 37.887467 -122.2878 37.887546 -122.288118 37.88739 -122.288178 37.887483 -122.288544 37.888461 -122.288167 37.8885 -122.288148 37.888521 -122.288127"); 
);
""", verbosity='geom')

# dump as a geojson file
with open("albany/geojson/schoolbuildings.geojson",mode="w") as f:
  geojson.dump(res,f)